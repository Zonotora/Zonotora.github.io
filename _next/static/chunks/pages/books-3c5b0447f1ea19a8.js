(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{3021:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/books",function(){return a(963)}])},8139:function(e,t,a){"use strict";var s=a(5893),r=a(1664),o=a.n(r);t.Z=e=>{let{active:t}=e,a=e=>e.charAt(0).toUpperCase()+e.slice(1);return(0,s.jsx)("header",{children:(0,s.jsx)("div",{className:"header",children:["posts","books","mindpalace","sketches","instrumentum"].map(e=>e===t?(0,s.jsx)("span",{style:{textDecoration:"underline"},children:(0,s.jsx)(o(),{href:"/".concat(e),children:a(e)})},e):(0,s.jsx)(o(),{href:"/".concat(e),children:a(e)},e))})})}},963:function(e,t,a){"use strict";a.r(t),a.d(t,{Home:function(){return N},__N_SSG:function(){return g},default:function(){return y}});var s,r,o=a(5893),l=a(1664),n=a.n(l),i=e=>{let{book:t,summary:a,slug:s}=e,r=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:t.title}),(0,o.jsx)("div",{children:t.author}),(0,o.jsx)("div",{style:{fontSize:"10pt",color:"antiquewhite"},children:t.date})]}),l=(0,o.jsx)(n(),{href:"/books/".concat(s),className:"book-preview".concat(a?" summary":""),children:r}),i=(0,o.jsx)("div",{className:"book-preview".concat(a?" summary":""),children:r});return a?l:i},c=a(8139),d=a(2489),u=a(9417);(s=r||(r={}))[s.None=0]="None",s[s.AZ=1]="AZ",s[s.ZA=2]="ZA";let h=e=>e===r.None?r.AZ:e===r.AZ?r.ZA:(r.ZA,r.None);var p=a(7294),j=e=>{let{filter:t,setFilter:a,validPredicates:s,showStats:l,setShowStats:n}=e,[i,c]=(0,p.useState)([]),[j,x]=(0,p.useState)(""),m=(e,t)=>{a(a=>({...a,sort:{...a.sort,[e]:t}}))},g=(e,s)=>{if(!e)return;let r=t.predicate[e];r===s&&(s=""),a(t=>({...t,predicate:{...t.predicate,[e]:s}}))},N=e=>{switch(e){case r.AZ:return u.bDz;case r.ZA:return u.ifd;case r.None:return u.DhN}},y=e=>"icon".concat(e!==r.None?" active":""),f=e=>{let t="icon";return e===j&&(t+=i.length>0?" active":""),t},k=(e,a)=>{let s="icon";return a===t.predicate[e]&&(s+=" active"),s},v=(e,t)=>{if(j!==e){let a=Array.from(t);a.sort(),c(a.map(t=>[e,t])),x(e)}else c([]),x("")};return(0,o.jsxs)("div",{className:"book-header",children:[(0,o.jsxs)("div",{className:"book-header-main",children:[(0,o.jsxs)("span",{className:y(t.sort.year),onClick:()=>{let e=h(t.sort.year);m("year",e)},children:["year ",(0,o.jsx)(d.G,{icon:N(t.sort.year)})]}),(0,o.jsxs)("span",{className:y(t.sort.title),onClick:()=>{let e=h(t.sort.title);m("title",e)},children:["title ",(0,o.jsx)(d.G,{icon:N(t.sort.title)})]}),(0,o.jsxs)("span",{className:y(t.sort.author),onClick:()=>{let e=h(t.sort.author);m("author",e)},children:["author ",(0,o.jsx)(d.G,{icon:N(t.sort.author)})]}),"|",(0,o.jsxs)("span",{className:f("year"),onClick:()=>{v("year",s.year)},children:["year ",(0,o.jsx)(d.G,{icon:u.G_j})]}),(0,o.jsxs)("span",{className:f("tag"),onClick:()=>{v("tag",s.tags)},children:["tag ",(0,o.jsx)(d.G,{icon:u.G_j})]}),"|",(0,o.jsxs)("span",{className:"icon".concat(l?" active":""),onClick:()=>n(!l),children:["stats ",(0,o.jsx)(d.G,{icon:u.Wpq})]})]}),i?(0,o.jsx)("div",{className:"book-header-secondary",children:i.map(e=>{let[t,a]=e;return(0,o.jsx)("span",{className:k(t,a),onClick:()=>g(t,a),children:a},a)})}):(0,o.jsx)(o.Fragment,{})]})},x=JSON.parse('[{"author":"Marcel Proust","country":"France","date":"2023-06-26","language":"Swedish","pages":418,"tags":[],"title":"Swann\'s Way","year":"1913"},{"author":"Richard Thaler","country":"USA","date":"2023-01-07","language":"English","pages":455,"tags":[],"title":"Misbehaving: The Making of Behavioral Economics","year":"2015"},{"author":"Leo Tolstoy","country":"Russia","date":"2023-01-01","language":"Russian","pages":77,"tags":["Bokklubben World Library"],"title":"The Death of Ivan Ilyich","year":"1886"}]');let m=e=>e.toLowerCase().replaceAll(":"," ").replaceAll(/\s+/g,"-");var g=!0;let N=e=>{let{summaries:t}=e,[a,s]=(0,p.useState)({}),[l,n]=(0,p.useState)(x),[d,u]=(0,p.useState)({sort:{title:r.None,author:r.None,year:r.None},predicate:{year:void 0,tag:void 0}}),[h,g]=(0,p.useState)({year:new Set,tags:new Set}),[N,y]=(0,p.useState)(!1),[f,k]=(0,p.useState)({total:{books:0,pages:0},predicates:{}});(0,p.useEffect)(()=>{let e={};for(let a of t){let t=m(a.title);e[t]=a.slug}s(e),console.log(e);let a={year:new Set,tags:new Set},r={books:0,pages:0},o={total:structuredClone(r),predicates:{}},l=(e,t)=>{e in o.predicates||(o.predicates[e]=structuredClone(r)),o.predicates[e].books+=1,o.predicates[e].pages+=t.pages};for(let e of x){let t=e.date.slice(0,4);for(let s of(a.year.add(t),e.tags))a.tags.add(s),l(s,e);o.total.books+=1,o.total.pages+=e.pages,l(t,e)}g(a),k(o)},[]),(0,p.useEffect)(()=>{let e=x.filter(e=>{let t=!0;return d.predicate.year&&t&&(t=e.date.slice(0,4)===d.predicate.year),d.predicate.tag&&t&&(t=e.tags.includes(d.predicate.tag)),t}).sort((e,t)=>{let a=0;return d.sort.year!==r.None&&(a||(a=d.sort.year===r.AZ?e.date.localeCompare(t.date):t.date.localeCompare(e.date))),d.sort.title!==r.None&&(a||(a=d.sort.title===r.AZ?e.title.localeCompare(t.title):t.title.localeCompare(e.title))),d.sort.author!==r.None&&(a||(a=d.sort.author===r.AZ?e.author.localeCompare(t.author):t.author.localeCompare(e.author))),a});n(e)},[d]);let v=(0,o.jsx)("div",{className:"center",children:(0,o.jsxs)("table",{className:"statistics",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{}),(0,o.jsx)("td",{children:"Books"}),(0,o.jsx)("td",{children:"Pages"})]})}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:"Total"}),(0,o.jsx)("td",{children:f.total.books}),(0,o.jsx)("td",{children:f.total.pages})]}),Object.entries(f.predicates).map(e=>{let[t,a]=e;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:t}),(0,o.jsx)("td",{children:a.books}),(0,o.jsx)("td",{children:a.pages})]},t)})]})]})}),b=(0,o.jsxs)("div",{className:"books",children:[l.map(e=>(0,o.jsx)(i,{book:e,summary:m(e.title) in a,slug:a[m(e.title)]},e.title)),[1,2,3].map(e=>(0,o.jsx)("div",{className:"book-preview-dummy"},e))]});return(0,o.jsxs)("div",{className:"main",children:[(0,o.jsx)(c.Z,{active:"books"}),(0,o.jsx)(j,{filter:d,setFilter:u,validPredicates:h,showStats:N,setShowStats:y}),N?v:b]})};var y=N}},function(e){e.O(0,[976,664,603,774,888,179],function(){return e(e.s=3021)}),_N_E=e.O()}]);