(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{3021:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/books",function(){return c(9094)}])},1952:function(a,b,c){"use strict";var d=c(5893),e=c(1664),f=c.n(e),g=function(a){var b=a.active,c=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};return(0,d.jsx)("header",{children:(0,d.jsx)("div",{className:"header",children:["posts","books","mindpalace","sketches","instrumentum"].map(function(a){return a===b?(0,d.jsx)("span",{style:{textDecoration:"underline"},children:(0,d.jsx)(f(),{href:"/".concat(a),children:c(a)})},a):(0,d.jsx)(f(),{href:"/".concat(a),children:c(a)},a)})})})};b.Z=g},9094:function(a,b,c){"use strict";c.r(b),c.d(b,{Home:function(){return x},"__N_SSG":function(){return w},default:function(){return y}});var d,e,f=c(603),g=c(5893),h=c(1664),i=c.n(h),j=function(a){var b=a.book,c=a.summary,d=a.slug,e=(0,g.jsxs)("div",{className:"book-preview".concat(c?" summary":""),children:[(0,g.jsx)("div",{children:b.title}),(0,g.jsx)("div",{children:b.author}),(0,g.jsx)("div",{style:{fontSize:"10pt",color:"antiquewhite"},children:b.date})]}),f=(0,g.jsx)(i(),{href:"/books/".concat(d),children:e});return c?f:e},k=j,l=c(1952),m=c(4924),n=c(6042),o=c(9396),p=c(9603),q=c(9417);(e=d||(d={}))[e.None=0]="None",e[e.AZ=1]="AZ",e[e.ZA=2]="ZA";var r=function(a){return a===d.None?d.AZ:a===d.AZ?d.ZA:a===d.ZA?d.None:(!1,d.None)},s=c(7294),t=function(a){var b=a.filter,c=a.setFilter,e=a.validPredicates,h=a.showStats,i=a.setShowStats,j=(0,s.useState)([]),k=j[0],l=j[1],t=(0,s.useState)(""),u=t[0],v=t[1],w=function(a,b){c(function(c){return(0,o.Z)((0,n.Z)({},c),{sort:(0,o.Z)((0,n.Z)({},c.sort),(0,m.Z)({},a,b))})})},x=function(a,d){a&&(b.predicate[a]===d&&(d=""),c(function(b){return(0,o.Z)((0,n.Z)({},b),{predicate:(0,o.Z)((0,n.Z)({},b.predicate),(0,m.Z)({},a,d))})}))},y=function(a){switch(a){case d.AZ:return q.bDz;case d.ZA:return q.ifd;case d.None:return q.DhN}},z=function(a){return"icon".concat(a!==d.None?" active":"")},A=function(a){var b="icon";return a===u&&(b+=k.length>0?" active":""),b},B=function(a,c){var d="icon";return c===b.predicate[a]&&(d+=" active"),d},C=function(){var a=r(b.sort.title);w("title",a)},D=function(){var a=r(b.sort.author);w("author",a)},E=function(){var a=r(b.sort.year);w("year",a)},F=function(a,b){if(u!==a){var c=Array.from(b);c.sort(),l(c.map(function(b){return[a,b]})),v(a)}else l([]),v("")},G=function(){F("year",e.year)},H=function(){F("tag",e.tags)};return(0,g.jsxs)("div",{className:"book-header",children:[(0,g.jsxs)("div",{className:"book-header-main",children:[(0,g.jsxs)("span",{className:z(b.sort.year),onClick:E,children:["year ",(0,g.jsx)(p.G,{icon:y(b.sort.year)})]}),(0,g.jsxs)("span",{className:z(b.sort.title),onClick:C,children:["title ",(0,g.jsx)(p.G,{icon:y(b.sort.title)})]}),(0,g.jsxs)("span",{className:z(b.sort.author),onClick:D,children:["author ",(0,g.jsx)(p.G,{icon:y(b.sort.author)})]}),"|",(0,g.jsxs)("span",{className:A("year"),onClick:G,children:["year ",(0,g.jsx)(p.G,{icon:q.G_j})]}),(0,g.jsxs)("span",{className:A("tag"),onClick:H,children:["tag ",(0,g.jsx)(p.G,{icon:q.G_j})]}),"|",(0,g.jsxs)("span",{className:"icon".concat(h?" active":""),onClick:function(){return i(!h)},children:["stats ",(0,g.jsx)(p.G,{icon:q.Wpq})]})]}),k?(0,g.jsx)("div",{className:"book-header-secondary",children:k.map(function(a){var b=(0,f.Z)(a,2),c=b[0],d=b[1];return(0,g.jsx)("span",{className:B(c,d),onClick:function(){return x(c,d)},children:d},d)})}):(0,g.jsx)(g.Fragment,{})]})},u=t,v=JSON.parse('[{"author":"Leo Tolstoy","country":"Russia","date":"2023-01-01","language":"Russian","pages":77,"tags":["Bokklubben World Library"],"title":"The Death of Ivan Ilyich","year":"1886"}]'),w=!0,x=function(a){var b=a.summaries,c=(0,s.useState)({}),e=c[0],h=c[1],i=(0,s.useState)(v),j=i[0],m=i[1],n=(0,s.useState)({sort:{title:d.None,author:d.None,year:d.None},predicate:{year:void 0,tag:void 0}}),o=n[0],p=n[1],q=(0,s.useState)({year:new Set,tags:new Set}),r=q[0],t=q[1],w=(0,s.useState)(!1),x=w[0],y=w[1],z=(0,s.useState)({total:{books:0,pages:0},predicates:{}}),A=z[0],B=z[1];(0,s.useEffect)(function(){var a={},c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var i=f.value;a[i.title.toLowerCase().replaceAll(" ","-")]=i.slug}}catch(j){d=!0,e=j}finally{try{c||null==g.return||g.return()}finally{if(d)throw e}}h(a);var k={year:new Set,tags:new Set},l={books:0,pages:0},m={total:structuredClone(l),predicates:{}},n=function(a,b){a in m.predicates||(m.predicates[a]=structuredClone(l)),m.predicates[a].books+=1,m.predicates[a].pages+=b.pages},o=!0,p=!1,q=void 0;try{for(var r,s=v[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var u=r.value,w=u.date.slice(0,4);k.year.add(w);var x=!0,y=!1,z=void 0;try{for(var A,C=u.tags[Symbol.iterator]();!(x=(A=C.next()).done);x=!0){var D=A.value;k.tags.add(D),n(D,u)}}catch(E){y=!0,z=E}finally{try{x||null==C.return||C.return()}finally{if(y)throw z}}m.total.books+=1,m.total.pages+=u.pages,n(w,u)}}catch(F){p=!0,q=F}finally{try{o||null==s.return||s.return()}finally{if(p)throw q}}t(k),B(m)},[]),(0,s.useEffect)(function(){var a=function(a){var b=!0;return o.predicate.year&&b&&(b=a.date.slice(0,4)===o.predicate.year),o.predicate.tag&&b&&(b=a.tags.includes(o.predicate.tag)),b},b=function(a,b){var c=0;return o.sort.year!==d.None&&(c||(c=o.sort.year===d.AZ?a.date.localeCompare(b.date):b.date.localeCompare(a.date))),o.sort.title!==d.None&&(c||(c=o.sort.title===d.AZ?a.title.localeCompare(b.title):b.title.localeCompare(a.title))),o.sort.author!==d.None&&(c||(c=o.sort.author===d.AZ?a.author.localeCompare(b.author):b.author.localeCompare(a.author))),c},c=v.filter(a).sort(b);m(c)},[o]);var C=(0,g.jsx)("div",{className:"center",children:(0,g.jsxs)("table",{className:"statistics",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{}),(0,g.jsx)("td",{children:"Books"}),(0,g.jsx)("td",{children:"Pages"})]})}),(0,g.jsxs)("tbody",{children:[(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:"Total"}),(0,g.jsx)("td",{children:A.total.books}),(0,g.jsx)("td",{children:A.total.pages})]}),Object.entries(A.predicates).map(function(a){var b=(0,f.Z)(a,2),c=b[0],d=b[1];return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:c}),(0,g.jsx)("td",{children:d.books}),(0,g.jsx)("td",{children:d.pages})]},c)})]})]})}),D=(0,g.jsxs)("div",{className:"books",children:[j.map(function(a){return(0,g.jsx)(k,{book:a,summary:a.title.toLowerCase().replaceAll(" ","-") in e,slug:e[a.title.toLowerCase().replaceAll(" ","-")]},a.title)}),[1,2,3].map(function(a){return(0,g.jsx)("div",{className:"book-preview-dummy"},a)})]});return(0,g.jsxs)("div",{className:"main",children:[(0,g.jsx)(l.Z,{active:"books"}),(0,g.jsx)(u,{filter:o,setFilter:p,validPredicates:r,showStats:x,setShowStats:y}),x?C:D]})},y=x}},function(a){a.O(0,[976,664,339,774,888,179],function(){var b;return a(a.s=3021)}),_N_E=a.O()}])